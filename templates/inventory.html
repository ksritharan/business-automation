{% extends "main.html" %}
{% block content %}
<script src="/static/jquery/jquery-3.5.1.min.js"></script>
<script src="/static/jquery-ui/jquery-ui.min.js"></script>
<div style="overflow-x: scroll; height: 100%">
  <br />
  <h4 class="noselect page-title">Fullfillable
    <button id="create-btn" class="btn btn-sm btn-primary s-rounded" onClick="sendCreateManifest()()">Create Manifest</button>
    <select class="form-select" style="width: auto">
      {% if strategy == 'oldest' %}
        <option selected>oldest</option>
        <option>most</option>
      {% else %}
        <option>oldest</option>
        <option selected>most</option>
      {% endif %}
    </select>
  </h4>
  <div class="divider" ></div>
  <table class="data-table noselect">
    <thead>
      <tr>
        <td>
          <h5>Receipt ID</h5>
        </td>
        <td>
          <h5>Order Date</h5>
        </td>
      </tr>
    </thead>
    {% for receipt in fulfillable %}
    <tr>
      <td>
        {{ receipt.receipt_id }}
      </td>
      <td>
        {{ receipt.order_date_str }}
      </td>
    </tr>
    {% endfor %}
  </table>
  <br />
  <h4 class="noselect page-title">Inventory
  <i class="icon icon-plus c-hand" onClick="openModalAdd();" style="font-size: 0.7em;vertical-align: baseline;margin-left:0.5em"></i>
  {% if debug %}
    <button id="random-btn" class="btn btn-sm btn-primary s-rounded" onClick="sendAddRandom()">Add Random</button>
  {% endif %}
  </h4>
  <div class="divider" ></div>
  <table class="data-table noselect">
    <thead>
      <tr>
        <td>
          <h5>SKU</h5>
        </td>
        <td>
          <h5>Quantity</h5>
        </td>
        <td>
        </td>
        <td>
        </td>
      </tr>
    </thead>
    {% for item in inventory %}
    <tr>
      <td>
        {{ item.sku }}
      </td>
      <td>
        {{ item.quantity }}
      </td>
      <td>
        <input id="{{ item.product_id }}-input-id" type="hidden" value="{{ item.product_id }}">
        <input id="{{ item.product_id }}-input-sku" type="hidden" value="{{ item.sku }}">
        <input id="{{ item.product_id }}-input-qty" type="hidden" value="{{ item.quantity }}">
        <i class="icon icon-edit c-hand" onClick="openModalEdit({{ item.product_id }});" style="font-size: 0.7em;vertical-align: baseline;margin-left:0.5em"></i>
      </td>
      <td>
        <i class="icon icon-delete c-hand" onClick="openModalDelete({{ item.product_id }});" style="font-size: 0.7em;vertical-align: baseline;margin-left:0.5em"></i>
      </td>
    </tr>
    {% endfor %}
  </table>
  
</div>

<div class="modal" id="modal-add">
  <a href="#close" class="modal-overlay" onClick="closeModalAdd();" aria-label="Close"></a>
  <div class="modal-container">
    <div class="modal-header">
      <a href="#close" class="btn btn-clear float-right" onClick="closeModalAdd();" aria-label="Close"></a>
      <div class="modal-title h5">Add to Inventory</div>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <label class="form-label" for="add-input-sku">SKU</label>

          <div class="form-autocomplete">
            <div class="form-autocomplete-input form-input">
              <input class="form-input" id="sku-search" type="text" placeholder="SKU Search">
            </div>
            <ul class="menu" id="autocomplete-list">
            </ul>
          </div>
          <label class="form-label" for="add-input-qty">Quantity</label>
          <input class="form-input form-val small-input" key="qty" id="add-input-qty" type="number" min="0" step="1" value="0">
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" onClick="sendAddItems();">Add</button><a class="btn btn-link" href="#close" onClick="closeModalAdd();" aria-label="Close">Close</a>
    </div>
  </div>
</div>
<div class="modal" id="modal-edit">
  <a href="#close" class="modal-overlay" onClick="closeModalEdit();" aria-label="Close"></a>
  <div class="modal-container">
    <div class="modal-header">
      <a href="#close" class="btn btn-clear float-right" onClick="closeModalEdit();" aria-label="Close"></a>
      <div class="modal-title h5">Edit Quantity</div>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <input class="form-input small-input" id="edit-input-sku" type="hidden" placeholder="">
          <label class="form-label" for="edit-input-qty">Quantity</label>
          <input class="form-input small-input" id="edit-input-qty" type="number" min="0" step="1" placeholder="">
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" onClick="sendEditItems();">Edit</button><a class="btn btn-link" href="#close" onClick="closeModalEdit();" aria-label="Close">Close</a>
    </div>
  </div>
</div>
<div class="modal modal-sm" id="modal-delete">
  <a href="#close" class="modal-overlay" onClick="closeModalDelete();" aria-label="Close"></a>
  <div class="modal-container">
    <div class="modal-header">
      <a href="#close" class="btn btn-clear float-right" onClick="closeModalDelete();" aria-label="Close"></a>
      <div class="modal-title h5">Remove inventory for this sku?</div>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <input class="form-input" id="input-item-sku" type="hidden">
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn btn-error" onClick="sendRemoveItem();">Remove</button><a class="btn btn-link" href="#close" onClick="closeModalDelete();" aria-label="Close">Close</a>
    </div>
  </div>
</div>
<input type="hidden" id="skus" value="{{ skus }}" />
<input type="hidden" id="strategy" value="{{ strategy }}" />
<script src="/static/js/inventory.js"></script>
{% endblock %}