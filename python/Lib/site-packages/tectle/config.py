import logging
logger = logging.getLogger()
from flask import session

def load_config(force=False):
    if 'config' not in session or force:
        try:
            fh = open('app.config', 'r')
            
            lines = fh.readlines()
            for line in lines:
                if '=' in line:
                    info = line.split('=', 1)
                    key = info[0].strip()
                    value = info[1].strip()
                    session[key] = value
            session['config'] = True
            fh.close()
        except Exception as e:
            logger.exception(e)
            
def load_config_non_flask():
    config = {}
    try:
        fh = open('app.config', 'r')
        
        lines = fh.readlines()
        for line in lines:
            if '=' in line:
                info = line.split('=', 1)
                key = info[0].strip()
                value = info[1].strip()
                config[key] = value
        config['config'] = True
        fh.close()
    except Exception as e:
        logger.exception(e)
    return config

def is_debug():
    load_config()
    return 'DEBUG' in session and session['DEBUG'] == 'True'

def is_printer_debug():
    load_config()
    return 'PRINTER_DEBUG' in session and session['PRINTER_DEBUG'] == 'True'